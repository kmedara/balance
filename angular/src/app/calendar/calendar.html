<p-dataview #dv [value]="days()" class="calendar-view flex-1 flex flex-col">
  <ng-template #header>
    <div class="shrink-0">
      <div class="flex justify-between items-center mb-1">
        <p-button icon="pi pi-chevron-left" (click)="previousMonth()" text />
        <span class="text-l font-semibold">{{ monthLabel }}</span>
        <p-button icon="pi pi-chevron-right" (click)="nextMonth()" text />
      </div>

      <div class="grid grid-cols-7 text-center text-sm font-medium">
        @for (day of weekdayNames; track day) {
          <div class="py-1">{{ day }}</div>
        }
      </div>
    </div>
  </ng-template>

  <ng-template #list let-items>
    <div class="flex-1 h-full grid grid-cols-7">
      @for (item of items; track $index) {
        <p-card
          class="day-cell flex flex-col"
          [ngClass]="{
            today: isToday(item.date),
            'out-month': !item.inCurrentMonth,
          }"
        >
          <ng-template #header>
            <span class="h2">
              {{ item.date.getDate() }}
            </span>
          </ng-template>

          <ng-template #content>
            @for (budget of item.budgets; track $index) {
              <div class="flex flex-col gap-1 overflow-hidden">
                <app-budget-calendar-item [budget]="budget" class=""></app-budget-calendar-item>
              </div>
            }
          </ng-template>
        </p-card>
      }
    </div>
  </ng-template>

  <ng-template #footer>
    <div class="shrink-0 p-1 flex">
      <p-button (click)="add()" icon="pi pi-plus" rounded></p-button>
    </div>
  </ng-template>
</p-dataview>
